function vis(){"use strict";const a={RELATIONSHIPS:"relationshipsVisual",TAGS:"tagsVisual",TABLE:"table"},b={width:280,height:480,bar:{colorFill:"#222",colorText:"#eee"}};window.socialNetwork=window.socialNetwork||{},window.socialNetwork.data=window.socialNetwork.data||[],window.socialNetwork.tagsAggregate={};let c=function(){let b=document.createElement("h3");b.innerText="tabulated data",document.getElementById(`${a.TABLE}`).appendChild(b);let c=document.createElement("div");c.className+="tableWrapper ";let d=document.createElement("table"),e=document.createElement("tr"),f=document.createElement("th");for(let a in["id","following","followers","tags"].map(b=>{f=document.createElement("th"),f.innerText=b,f.className+=b,e.appendChild(f)}),d.appendChild(e),l){e=document.createElement("tr");let b;b=document.createElement("td"),b.innerText=a+"",b.className+="id",e.appendChild(b),b=document.createElement("td"),b.innerText=l[a].following.toString().split(",").join(", "),b.className+="following",e.appendChild(b),b=document.createElement("td"),b.innerText=l[a].followers.toString().split(",").join(", "),b.className+="followers",e.appendChild(b),b=document.createElement("td"),b.className+="tags",b.innerText=l[a].tags&&0<l[a].tags.length?l[a].tags.join(", "):"",e.appendChild(b),d.appendChild(e)}document.getElementById(`${a.TABLE}`).appendChild(d)},d=function(){let b=document.getElementById(`${a.RELATIONSHIPS}`),c=document.createElement("h3");c.innerText="relationships",b.appendChild(c);let d=document.createElement("div");d.className+="clusterWrapper ";let e,f,g,h;for(var j in l){e=document.createElement("div"),e.className+="cluster ";for(let a,b=0,c=l[j].following.length;b<c;b+=1)a="w"+(Math.floor(1e3/c)+""),h=document.createElement("div"),h.className+="targetFollowing "+a,h.title=l[j].following[b],h.innerText=l[j].following[b],e.appendChild(h);f=document.createElement("div"),f.className+="target ",f.innerText=j,e.appendChild(f);for(let a,b=0,c=l[j].followers.length;b<c;b+=1)a="w"+(Math.floor(1e3/c)+""),g=document.createElement("div"),g.className+="targetFollower "+a,g.title=l[j].followers[b],g.innerText=l[j].followers[b],e.appendChild(g);d.appendChild(e)}b.appendChild(d)},e=function(){let c=document.createElement("h3");c.innerText="tags",document.getElementById(`${a.TAGS}`).appendChild(c);let d=[],e=[];for(var f in socialNetwork.tagsAggregate)d.push(f),e.push(socialNetwork.tagsAggregate[f]);var g={top:20,right:20,bottom:40,left:120},h=b.width,i=20*d.length-g.top-g.bottom,j=d3.select(`#${a.TAGS}`).append("svg").attr("width",h+g.left+g.right).attr("height",i+g.top+g.bottom).append("g").attr("transform","translate("+g.left+","+g.top+")"),k=d3.scaleLinear().domain([0,120]).range([0,h]);j.append("g").attr("transform","translate(0,"+i+")").call(d3.axisBottom(k)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end");var l=d3.scaleBand().range([0,i]).domain(d.map(function(b){return b})).padding(.2);j.append("g").call(d3.axisLeft(l)),j.append("g").selectAll("rect").data(d).enter().append("rect").attr("x",k(0)).attr("y",function(b){return l(b)}).attr("width",function(b){return k(socialNetwork.tagsAggregate[b])}).attr("height",l.bandwidth())},f=function(){n(),e(),d(),c()},g=function(){for(var b in a)document.getElementById(a[b]).innerHTML="",document.getElementById(a[b]).remove();j()},h=function(){window.store.sample().then(b=>{socialNetwork.data.push(...b)})},i=function(){let a=document.createElement("div");a.className+="buttonWrapper ";let b={},c=(c,d)=>{b=document.createElement("button"),b.innerText=c,b.addEventListener("click",d),a.appendChild(b)};c("Add",()=>{h(),g(),f()}),c("Clear",()=>{window.socialNetwork={},window.dataset={},window.tagsAggregate={},g()}),document.body.appendChild(a)},j=function(){for(var b in a){let c=document.createElement("div");c.className+="displayWrapper "+a[b],c.id=a[b],document.body.appendChild(c)}},k=socialNetwork.data,l={},m={},n=async function(){for(var a in k.sort(),k.map(b=>{l[b[0]]?l[b[0]].following&&0>l[b[0]].following.indexOf(b[1])&&l[b[0]].following.push(b[1]):l[b[0]]={followers:[],following:[b[1]],tags:[]},l[b[1]]?l[b[1]].followers&&0>l[b[1]].followers.indexOf(b[0])&&l[b[1]].followers.push(b[0]):l[b[1]]={following:[],followers:[b[0]],tags:[]}}),l)l[a].tags=await window.store.tags(a+"").then(function(b){return b[0]},function(a){console.log("error: ",a.message)}).catch(function(){});for(const a in l){let b=l[a].tags;for(let a,c=0,d=b.length;c<d;c+=1)a=b[c].replace(/[;:().,]/gi,""),m[a]?m[a]+=1:m[a]=1}window.socialNetwork.tagsAggregate=m},o=function(){h(),n(),i(),j(),h(),g(),f()}()}vis();try{module.exports=vis}catch(a){console.warn(a.message)}